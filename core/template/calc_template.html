<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAGE_TITLE</title>
    <link rel="stylesheet" href="template.css">
    <style>
        CUSTOM_STYLES
    </style>
    <style>
        /* 页面尺寸设置 */
        @page {
            size: PAGE_SIZE;
            margin: 20mm;
        }

        @media print {
            body {
                width: PAGE_WIDTH;
            }
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 修复 Tailwind CSS 重置标题样式的问题 - 按照论文格式设置标题大小 */
        h1 {
            font-size: 2em !important;
            line-height: 1.3 !important;
            margin-top: 0.67em !important;
            margin-bottom: 0.67em !important;
            font-weight: 600 !important;
        }

        h2 {
            font-size: 1.5em !important;
            line-height: 1.35 !important;
            margin-top: 0.83em !important;
            margin-bottom: 0.83em !important;
            font-weight: 600 !important;
        }

        h3 {
            font-size: 1.17em !important;
            line-height: 1.4 !important;
            margin-top: 1em !important;
            margin-bottom: 1em !important;
            font-weight: 600 !important;
        }

        h4 {
            font-size: 1em !important;
            line-height: 1.4 !important;
            margin-top: 1.33em !important;
            margin-bottom: 1.33em !important;
            font-weight: 600 !important;
        }

        h5 {
            font-size: 0.83em !important;
            line-height: 1.5 !important;
            margin-top: 1.67em !important;
            margin-bottom: 1.67em !important;
            font-weight: 600 !important;
        }

        h6 {
            font-size: 0.67em !important;
            line-height: 1.5 !important;
            margin-top: 2.33em !important;
            margin-bottom: 2.33em !important;
            font-weight: 600 !important;
        }
    </style>

    <script>
        // JavaScript 代码：自动生成目录
        function generateTOC() {
            const tocContainer = document.getElementById('toc-container');
            if (!tocContainer) return;  // 如果没有目录容器则退出

            const headings = document.querySelectorAll('h2, h3, h4, h5, h6');  // 扫描 h2-h6 标题
            const counters = [0, 0, 0, 0, 0];  // h2-h6 的计数器
            let tocHTML = '<div class="toc-list">';

            headings.forEach((heading, index) => {
                // 跳过目录容器内的标题
                if (heading.closest('#toc')) return;

                // 确保标题有 id
                if (!heading.id) {
                    heading.id = `heading-${index}`;
                }

                const level = parseInt(heading.tagName.substring(1)) - 2;  // h2=0, h3=1, ..., h6=4

                // 更新计数器
                counters[level]++;
                for (let i = level + 1; i < 5; i++) {
                    counters[i] = 0;  // 重置下级计数器
                }

                // 生成章节号
                let sectionNumber = '';
                for (let i = 0; i <= level; i++) {
                    if (counters[i] > 0) {
                        sectionNumber += (sectionNumber ? '.' : '') + counters[i];
                    }
                }

                const text = heading.textContent;
                const indent = level * 1;  // 每级缩进 1rem

                // 生成目录项：章节号 + 标题 + 点线 + 页码占位符
                tocHTML += `
                    <div class="toc-item" style="margin-left: ${indent}rem;">
                        <a href="#${heading.id}" class="toc-link">
                            <span class="toc-number">${sectionNumber}</span>
                            <span class="toc-text">${text}</span>
                            <span class="toc-dots"></span>
                            <span class="toc-page" data-page-placeholder="true">[PAGE_${index}]</span>
                        </a>
                    </div>`;
            });

            tocHTML += '</div>';
            tocContainer.innerHTML = tocHTML;
        }

        window.onload = generateTOC;  // 页面加载后执行
    </script>
</head>

<body>
    <div class="content">
        CONTENT
    </div>
</body>

</html>