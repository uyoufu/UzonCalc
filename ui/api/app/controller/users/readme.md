# users 功能开发说明

## 功能

使用 jwt 进行用户认证和授权，并对用户赋予 role 来区分权限

应包含如下功能：

- 用户登录：登录后，返回 accessToken 和 refreshToken，同时返回用户信息，但不包含密码字段
- 用户注册：只有具有管理员权限的用户才能注册新用户
- 获取用户信息：通过用户 ID 获取用户的详细信息，不包含密码
- 更新用户信息：允许用户更新自己的信息，管理员可以更新任何用户的信息
- 删除用户：只有管理员可以删除用户，并且不能删除自己，删除时仅作逻辑删除
- 修改密码：允许用户修改自己的密码
- 重置密码：管理员可以为其他用户重置一个默认密码
- 列出用户：管理员可以获取所有用户的列表，普通用户只能获取自己的信息
- 角色管理：管理员可以为用户分配或修改角色（如 admin、regular）
- Token 刷新：提供刷新 token 的接口，以延长用户会话
- 用户登出：提供用户登出的功能，撤销当前的 token
- 密码加密存储：使用安全的哈希算法（如 bcrypt）存储用户密码，每个密码使用唯一的 salt，每次修改密码时重新生成 salt
- 输入验证和错误处理：对所有输入进行严格验证，并提供清晰的错误信息
- 日志记录：记录用户的登录、登出、注册等重要操作日志，便于审计和追踪，logger 从 config 中导入